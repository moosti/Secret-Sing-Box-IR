{
	"log": {
		"level": "fatal",
		"output": "box.log",
		"timestamp": true
	},
	"dns": {
		"servers": [
			{
				"type": "local",
				"tag": "dns-main"
			}
		],
		"rules": [
			{
				"rule_set": ["category-ads-all"],
				"action": "predefined",
				"rcode": "NOERROR"
			}
		],
		"final": "dns-main"
	},
	"inbounds": [
		{
			"type": "trojan",
			"tag": "trojan-in",
			"listen": "127.0.0.1",
			"listen_port": 10443,
			"users": [
				{
					"name": "user",
					"password": "TROJAN-PASSWORD"
				}
			],
			"transport": {
				"type": "ws",
				"path": "/TROJAN-PATH"
			},
			"multiplex": {
				"enabled": true,
				"padding": true
			}
		},
		{
			"type": "vless",
			"tag": "vless-in",
			"listen": "127.0.0.1",
			"listen_port": 11443,
			"users": [
				{
					"name": "user",
					"uuid": "VLESS-UUID"
				}
			],
			"transport": {
				"type": "ws",
				"path": "/VLESS-PATH"
			},
			"multiplex": {
				"enabled": true,
				"padding": true
			}
		}
	],
	"outbounds": [
		{
			"type": "direct",
			"tag": "direct"
		},
		{
			"type": "socks",
			"tag": "warp",
			"server": "127.0.0.1",
			"server_port": 40000
		},
		{
			"type": "direct",
			"tag": "IPv4",
			"domain_resolver": {
				"server": "dns-main",
				"strategy": "ipv4_only"
			}
		}
	],
	"route": {
		"rules": [
			{
				"action": "sniff"
			},
			{
				"protocol": "dns",
				"action": "hijack-dns"
			},
			{
				"rule_set": ["category-ads-all"],
				"action": "reject",
				"method": "drop"
			},
			{
				"domain_suffix": [
					".ir",
					"snapp.ir",
					"digikala.com",
					"divar.ir",
					"aparat.com",
					"filimo.com",
					"namasha.com",
					"cafebazaar.ir",
					"myket.ir",
					"alibaba.ir",
					"torob.com",
					"shaparak.ir"
				],
				"domain_keyword": [
					"xn--",
					"bank",
					"shaparak",
					"mellat",
					"parsian",
					"saderat",
					"tejarat",
					"melli",
					"sepah",
					"saman",
					"pasargad",
					"eghtesad"
				],
				"rule_set": ["geoip-ir", "category-gov-ir", "ir-sites"],
				"outbound": "direct"
			},
			{
				"domain_suffix": ["canva.com"],
				"rule_set": [
					"google",
					"google-deepmind",
					"openai",
					"anthropic",
					"xai",
					"netflix",
					"spotify",
					"openai-sora"
				],
				"outbound": "warp"
			},
			{
				"rule_set": ["facebook", "twitter", "instagram", "youtube"],
				"outbound": "IPv4"
			}
		],
		"rule_set": [
			{
				"tag": "geoip-ir",
				"type": "local",
				"format": "binary",
				"path": "/var/www/RULESETPATH/geoip-ir.srs"
			},
			{
				"tag": "category-gov-ir",
				"type": "local",
				"format": "binary",
				"path": "/var/www/RULESETPATH/geosite-category-gov-ir.srs"
			},
			{
				"tag": "ir-sites",
				"type": "local",
				"format": "binary",
				"path": "/var/www/RULESETPATH/geosite-ir.srs"
			},
			{
				"tag": "category-ads-all",
				"type": "local",
				"format": "binary",
				"path": "/var/www/RULESETPATH/geosite-category-ads-all.srs"
			},
			{
				"tag": "google",
				"type": "local",
				"format": "binary",
				"path": "/var/www/RULESETPATH/geosite-google.srs"
			},
			{
				"tag": "google-deepmind",
				"type": "local",
				"format": "binary",
				"path": "/var/www/RULESETPATH/geosite-google-deepmind.srs"
			},
			{
				"tag": "openai",
				"type": "local",
				"format": "binary",
				"path": "/var/www/RULESETPATH/geosite-openai.srs"
			},
			{
				"tag": "anthropic",
				"type": "local",
				"format": "binary",
				"path": "/var/www/RULESETPATH/geosite-anthropic.srs"
			},
			{
				"tag": "xai",
				"type": "local",
				"format": "binary",
				"path": "/var/www/RULESETPATH/geosite-xai.srs"
			},
			{
				"tag": "netflix",
				"type": "local",
				"format": "binary",
				"path": "/var/www/RULESETPATH/geosite-netflix.srs"
			},
			{
				"tag": "spotify",
				"type": "local",
				"format": "binary",
				"path": "/var/www/RULESETPATH/geosite-spotify.srs"
			},
			{
				"tag": "openai-sora",
				"type": "local",
				"format": "binary",
				"path": "/var/www/RULESETPATH/geosite-openai-sora.srs"
			},
			{
				"tag": "facebook",
				"type": "local",
				"format": "binary",
				"path": "/var/www/RULESETPATH/geosite-facebook.srs"
			},
			{
				"tag": "twitter",
				"type": "local",
				"format": "binary",
				"path": "/var/www/RULESETPATH/geosite-twitter.srs"
			},
			{
				"tag": "instagram",
				"type": "local",
				"format": "binary",
				"path": "/var/www/RULESETPATH/geosite-instagram.srs"
			},
			{
				"tag": "youtube",
				"type": "local",
				"format": "binary",
				"path": "/var/www/RULESETPATH/geosite-youtube.srs"
			}
		]
	},
	"experimental": {
		"cache_file": {
			"enabled": true
		}
	}
}
