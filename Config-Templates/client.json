{
	"log": {
		"level": "fatal",
		"timestamp": true
	},
	"dns": {
		"servers": [
			{
				"tag": "dns-remote",
				"address": "tls://1.1.1.1",
				"detour": "proxy"
			},
			{
				"tag": "dns-local",
				"address": "10.202.10.202"
			},
			{
				"tag": "dns-block",
				"address": "rcode://success"
			}
		],
		"rules": [
			{
				"rule_set": ["category-ads-all"],
				"server": "dns-block",
				"disable_cache": true
			},
			{
				"domain_suffix": [
					"twitter.com",
					"x.com",
					"facebook.com",
					"fb.com",
					"instagram.com",
					"youtube.com",
					"googlevideo.com",
					"whatsapp.com",
					"whatsapp.net",
					"signal.org",
					"bbc.com",
					"bbc.co.uk",
					"voanews.com",
					"rferl.org",
					"dw.com"
				],
				"domain_keyword": [
					"facebook",
					"twitter",
					"instagram",
					"youtube",
					"whatsapp",
					"telegram"
				],
				"rule_set": [
					"telegram",
					"google",
					"facebook",
					"twitter",
					"instagram",
					"youtube"
				],
				"server": "dns-remote"
			},
			{
				"domain_suffix": [
					".ir",
					"DOMAIN",
					"snapp.ir",
					"digikala.com",
					"divar.ir",
					"aparat.com",
					"filimo.com",
					"namasha.com",
					"irancell.ir",
					"mci.ir",
					"shatel.ir"
				],
				"domain_keyword": [
					"xn--",
					"bank",
					"shaparak",
					"mellat",
					"parsian",
					"saderat",
					"tejarat",
					"melli",
					"sepah",
					"saman",
					"pasargad",
					"eghtesad",
					"iran",
					"yjc",
					"isna",
					"irna",
					"tasnim",
					"mehr"
				],
				"rule_set": ["category-gov-ir", "ir-sites"],
				"server": "dns-local"
			},
			{
				"inbound": ["tun-in"],
				"server": "dns-remote"
			}
		],
		"final": "dns-local"
	},
	"inbounds": [
		{
			"type": "tun",
			"tag": "tun-in",
			"interface_name": "tun0",
			"stack": "system",
			"address": "172.19.0.1/28",
			"auto_route": true,
			"strict_route": true,
			"sniff_override_destination": true
		}
	],
	"outbounds": [
		{
			"type": "direct",
			"tag": "direct"
		},
		{
			"type": "trojan",
			"tag": "proxy",
			"server": "DOMAIN",
			"server_port": 443,
			"password": "TROJAN-PASSWORD",
			"tls": {
				"enabled": true,
				"server_name": "DOMAIN",
				"utls": {
					"enabled": true,
					"fingerprint": "randomized"
				}
			},
			"multiplex": {
				"enabled": true,
				"padding": true
			},
			"transport": {
				"type": "ws",
				"path": "/TROJAN-PATH"
			}
		}
	],
	"route": {
		"rules": [
			{
				"action": "sniff"
			},
			{
				"protocol": "dns",
				"action": "hijack-dns"
			},
			{
				"ip_is_private": true,
				"outbound": "direct"
			},
			{
				"rule_set": ["category-ads-all"],
				"action": "reject",
				"method": "drop"
			},
			{
				"domain_suffix": [
					"twitter.com",
					"x.com",
					"facebook.com",
					"fb.com",
					"instagram.com",
					"youtube.com",
					"googlevideo.com",
					"whatsapp.com",
					"whatsapp.net",
					"signal.org",
					"bbc.com",
					"bbc.co.uk",
					"voanews.com",
					"rferl.org",
					"dw.com",
					"reddit.com",
					"linkedin.com",
					"medium.com",
					"discord.com",
					"spotify.com",
					"soundcloud.com"
				],
				"domain_keyword": [
					"facebook",
					"twitter",
					"instagram",
					"youtube",
					"whatsapp",
					"telegram"
				],
				"rule_set": [
					"telegram",
					"google",
					"facebook",
					"twitter",
					"instagram",
					"youtube",
					"reddit",
					"discord",
					"spotify",
					"linkedin"
				],
				"outbound": "proxy"
			},
			{
				"domain_suffix": [
					".ir",
					"DOMAIN",
					"snapp.ir",
					"digikala.com",
					"divar.ir",
					"aparat.com",
					"filimo.com",
					"namasha.com",
					"irancell.ir",
					"mci.ir",
					"shatel.ir",
					"cafebazaar.ir",
					"myket.ir"
				],
				"domain_keyword": [
					"xn--",
					"bank",
					"shaparak",
					"mellat",
					"parsian",
					"saderat",
					"tejarat",
					"melli",
					"sepah",
					"saman",
					"pasargad",
					"eghtesad",
					"iran",
					"yjc",
					"isna",
					"irna",
					"tasnim",
					"mehr"
				],
				"ip_cidr": ["SERVER-IP"],
				"rule_set": ["category-gov-ir", "ir-sites"],
				"outbound": "direct"
			},
			{
				"action": "resolve",
				"strategy": "prefer_ipv4"
			},
			{
				"rule_set": ["geoip-ir"],
				"outbound": "direct"
			},
			{
				"inbound": ["tun-in"],
				"outbound": "proxy"
			}
		],
		"rule_set": [
			{
				"tag": "geoip-ir",
				"type": "remote",
				"format": "binary",
				"url": "https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geoip-ir.srs"
			},
			{
				"tag": "category-gov-ir",
				"type": "remote",
				"format": "binary",
				"url": "https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-category-gov-ir.srs"
			},
			{
				"tag": "ir-sites",
				"type": "remote",
				"format": "binary",
				"url": "https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-ir.srs"
			},
			{
				"tag": "google",
				"type": "remote",
				"format": "binary",
				"url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-google.srs"
			},
			{
				"tag": "telegram",
				"type": "remote",
				"format": "binary",
				"url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-telegram.srs"
			},
			{
				"tag": "facebook",
				"type": "remote",
				"format": "binary",
				"url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-facebook.srs"
			},
			{
				"tag": "twitter",
				"type": "remote",
				"format": "binary",
				"url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-twitter.srs"
			},
			{
				"tag": "instagram",
				"type": "remote",
				"format": "binary",
				"url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-instagram.srs"
			},
			{
				"tag": "youtube",
				"type": "remote",
				"format": "binary",
				"url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-youtube.srs"
			},
			{
				"tag": "reddit",
				"type": "remote",
				"format": "binary",
				"url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-reddit.srs"
			},
			{
				"tag": "discord",
				"type": "remote",
				"format": "binary",
				"url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-discord.srs"
			},
			{
				"tag": "spotify",
				"type": "remote",
				"format": "binary",
				"url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-spotify.srs"
			},
			{
				"tag": "linkedin",
				"type": "remote",
				"format": "binary",
				"url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-linkedin.srs"
			},
			{
				"tag": "category-ads-all",
				"type": "remote",
				"format": "binary",
				"url": "https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-category-ads-all.srs"
			}
		],
		"auto_detect_interface": true
	},
	"experimental": {
		"cache_file": {
			"enabled": true
		}
	}
}
